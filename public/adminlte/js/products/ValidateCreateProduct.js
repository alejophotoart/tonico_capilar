function registerProduct(){let e=document.getElementById("code").value,t=document.getElementById("name").value,o=$("#price").val(),n=document.getElementById("quantity").value,r=document.getElementById("description").value;var a=$("#warehouses").val();let i=o.replace(/\$/g,"").replace(/\./g,"");if(0==e||""==e||0==t||""==t||0==i||""==i||0==n||""==n)return Swal.fire({icon:"info",title:"Campos vacios",text:"Existen campos vacios, por favor llenelos",confirmButtonColor:"#343a40",showConfirmButton:!0}),!1;Swal.fire({title:"Estas seguro?",text:"Deseas crear el producto "+t,icon:"question",showCancelButton:!0,confirmButtonColor:"#343a40",cancelButtonColor:"#d33",confirmButtonText:"Si, Crearlo!",cancelButtonText:"Cancelar"}).then(o=>{if(o.isConfirmed){let o,l={code:e,name:t,price:i,quantity:n,description:r,warehouses:a};console.log(l),Swal.fire({title:"Creando Producto",didOpen:()=>{Swal.showLoading(),o=setInterval(()=>{const e=Swal.getHtmlContainer();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}},100)}}),$.ajax({url:"/productos/create",type:"POST",data:JSON.stringify(l),contentType:"application/json",dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(e){var t=document.getElementById("formFile");if(t=t.files[0],500==e.status)return Swal.fire({icon:e.icon,title:e.title,text:e.message,confirmButtonColor:"#343a40",showConfirmButton:!0}),!1;if(400==e.status)return Swal.fire({icon:e.icon,title:e.title,text:e.message,confirmButtonColor:"#343a40",showConfirmButton:!0}),!1;if(t){saveImage(e.d.code,e.name)}else{if(200!=e.status)return 100==e.status?(Swal.fire({icon:e.icon,title:e.title,text:e.message,confirmButtonColor:"#343a40"}),!1):(Swal.fire({icon:"error",title:"Ops...",text:"Ocurrio un error inesperado",confirmButtonColor:"#343a40"}),!1);Swal.fire({icon:e.icon,title:e.title,text:e.message+e.space+e.name,confirmButtonColor:"#343a40",showConfirmButton:!0}).then(e=>{$(location).attr("href","/productos")})}}})}})}function saveImage(e,t){var o=document.getElementById("formFile");let n;if(o=o.files[0],console.log(o),Swal.fire({title:"Validando Imagen",didOpen:()=>{Swal.showLoading(),n=setInterval(()=>{const e=Swal.getHtmlContainer();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}},100)}}),o){var r=new FormData;r.append("code",e),r.append("name",t),r.append("image",o),$.ajax({type:"POST",dataType:"json",processData:!1,contentType:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:r,url:"/productos/saveImage",success:function(e){if(200!=e.status)return 100==e.status?(Swal.fire({icon:e.icon,title:e.title,text:e.message,confirmButtonColor:"#343a40"}),!1):(Swal.fire({icon:"error",title:"Ops...",text:"Ocurrio un error inesperado",confirmButtonColor:"#343a40"}),!1);Swal.fire({icon:e.icon,title:e.title,text:e.message+e.space+e.name,confirmButtonColor:"#343a40",showConfirmButton:!0}).then(e=>{e.value&&(console.log("hola esta mierda sirve pa guardar la imagen de mierda"),$(location).attr("href","http://127.0.0.1:8000/productos"))})}})}else alert("No hay archivo.")}function limitar(e,t,o){var n=e.keyCode?e.keyCode:e.charCode;return 8==n||46==n||37==n||39==n||38==n||40==n||(t.length>=o?(Swal.fire({icon:"error",title:"Ops...",text:"Supero el limite de caracteres",confirmButtonColor:"#343a40"}),!1):void 0)}function valideKey(e){var t=e.which?e.which:e.keyCode;return 8==t||(t>=48&&t<=57||(Swal.fire({icon:"warning",title:"Ops...",text:"El campo Codigo es solo numerico",confirmButtonColor:"#343a40"}),!1))}function validePrice(e){var t=e.which?e.which:e.keyCode;return 8==t||(t>=48&&t<=57||(Swal.fire({icon:"warning",title:"Ops...",text:"El campo Precio es solo numerico",confirmButtonColor:"#343a40"}),!1))}function validequantity(e){var t=e.which?e.which:e.keyCode;return 8==t||(t>=48&&t<=57||(Swal.fire({icon:"warning",title:"Ops...",text:"El campo Cantidad es solo numerico",confirmButtonColor:"#343a40"}),!1))}$(function(){$("#warehouses").selectpicker()});