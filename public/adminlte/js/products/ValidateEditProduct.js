function EditProduct(t){let e=document.getElementById("name").value,o=$("#price").val(),n=document.getElementById("quantity").value,a=document.getElementById("description").value;var i=$("#warehouses").val();let r=o.replace(/\$/g,"").replace(/\./g,"");if(0==e||""==e||0==r||""==r||0==n||""==n)return Swal.fire({icon:"info",title:"Campos vacios",text:"Existen campos vacios, por favor llenelos",confirmButtonColor:"#343a40",showConfirmButton:!0}),!1;Swal.fire({title:"Estas seguro?",text:"Deseas editar el producto "+e,icon:"question",showCancelButton:!0,confirmButtonColor:"#343a40",cancelButtonColor:"#d33",confirmButtonText:"Si, Editarlo!",cancelButtonText:"Cancelar"}).then(o=>{if(o.isConfirmed){let o,l={name:e,price:r,quantity:n,description:a,warehouses:i};console.log(l),Swal.fire({title:"Actualizando Informacion",didOpen:()=>{Swal.showLoading(),o=setInterval(()=>{const t=Swal.getHtmlContainer();if(t){const e=t.querySelector("b");e&&(e.textContent=Swal.getTimerLeft())}},100)}}),$.ajax({url:"/productos/"+t+"/update",type:"PUT",data:JSON.stringify(l),contentType:"application/json",dataType:"json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},success:function(t){var e=t.d.id,o=t.name,n=document.getElementById("formFile");if(n=n.files[0],500==t.status)return Swal.fire({icon:t.icon,title:t.title,text:t.message,confirmButtonColor:"#343a40",showConfirmButton:!0}),!1;if(400==t.status)return Swal.fire({icon:t.icon,title:t.title,text:t.message,confirmButtonColor:"#343a40",showConfirmButton:!0}),!1;if(n)updateImage(e,o);else{if(200!=t.status)return 100==t.status?(Swal.fire({icon:t.icon,title:t.title,text:t.message,confirmButtonColor:"#343a40"}),!1):(Swal.fire({icon:"error",title:"Ops...",text:"Ocurrio un error inesperado",confirmButtonColor:"#343a40"}),!1);Swal.fire({icon:t.icon,title:t.title,text:t.message+t.space+t.name,confirmButtonColor:"#343a40",showConfirmButton:!0}).then(t=>{$(location).attr("href","/productos")})}}})}})}function updateImage(t,e){var o=document.getElementById("formFile");let n;if(o=o.files[0],console.log(o),Swal.fire({title:"Validando Imagen",didOpen:()=>{Swal.showLoading(),n=setInterval(()=>{const t=Swal.getHtmlContainer();if(t){const e=t.querySelector("b");e&&(e.textContent=Swal.getTimerLeft())}},100)}}),o){var a=new FormData;a.append("id",t),a.append("name",e),a.append("image",o),$.ajax({type:"POST",dataType:"json",processData:!1,contentType:!1,headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content")},data:a,url:"/productos/updateImage",success:function(t){if(200!=t.status)return 100==t.status?(Swal.fire({icon:t.icon,title:t.title,text:t.message,confirmButtonColor:"#343a40"}),!1):(Swal.fire({icon:"error",title:"Ops...",text:"Ocurrio un error inesperado",confirmButtonColor:"#343a40"}),!1);Swal.fire({icon:t.icon,title:t.title,text:t.message+t.space+t.name,confirmButtonColor:"#343a40",showConfirmButton:!0}).then(t=>{t.value&&$(location).attr("href","https://gdseclatam.com/productos")})}})}else alert("No hay archivo.")}function limitar(t,e,o){var n=t.keyCode?t.keyCode:t.charCode;return 8==n||46==n||37==n||39==n||38==n||40==n||(e.length>=o?(Swal.fire({icon:"error",title:"Ops...",text:"Supero el limite de caracteres",confirmButtonColor:"#343a40"}),!1):void 0)}function validePrice(t){var e=t.which?t.which:t.keyCode;return 8==e||(e>=48&&e<=57||(Swal.fire({icon:"warning",title:"Ops...",text:"El campo Precio es solo numerico",confirmButtonColor:"#343a40"}),!1))}function validequantity(t){var e=t.which?t.which:t.keyCode;return 8==e||(e>=48&&e<=57||(Swal.fire({icon:"warning",title:"Ops...",text:"El campo Cantidad es solo numerico",confirmButtonColor:"#343a40"}),!1))}$(document).ready(function(){document.getElementById("code").readOnly=!0,$("#warehouses").selectpicker()});
