var i=0;function trashProduct(e){i-=1,$("."+e).remove()}function minTwoDigits(e){return(e<10?"0":"")+e}function validePhone(e){var t=e.which?e.which:e.keyCode;return 8==t||(t>=48&&t<=57||(Swal.fire({icon:"warning",title:"Ops...",text:"El campo Telefono es solo numerico",confirmButtonColor:"#343a40"}),!1))}function showVoucher(e,t){Swal.fire({imageUrl:"/"+e+t,imageHeight:700,imageWidth:500,imageAlt:"A tall image",confirmButtonColor:"#343a40"})}function checkPassedOrder(e){Swal.fire({title:"Estas seguro?",text:"Deseas aprobar este deposito",icon:"question",showCancelButton:!0,confirmButtonColor:"#343a40",cancelButtonColor:"#d33",confirmButtonText:"Si, Aprobarlo!",cancelButtonText:"Cancelar"}).then(t=>{if(t.isConfirmed){let t;Swal.fire({title:"Aprobando deposito del Pedido "+e,didOpen:()=>{Swal.showLoading(),t=setInterval(()=>{const e=Swal.getHtmlContainer();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}},100)}}),$.ajax({url:"/pedidos/aprobados/"+e,type:"put",contentType:"application/json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),contentType:"application/json"},data:null,success:function(e){200==e.status?Swal.fire({icon:e.icon,title:e.title,text:e.message+e.space+e.id+e.space+e.message2,confirmButtonColor:"#343a40",showConfirmButton:!0}).then(e=>{$(location).attr("href","/pedidos/depositos")}):Swal.fire({icon:"error",title:"Ops...",text:"Ocurrio un error inesperado"})}})}else t.dismiss&&$("#formId input[type=checkbox]").prop("checked",!1)})}function checkProcessOrder(e){Swal.fire({title:"Estas seguro?",text:"Deseas Poner en proceso el pedido "+e,icon:"question",showCancelButton:!0,confirmButtonColor:"#343a40",cancelButtonColor:"#d33",confirmButtonText:"Si, Procesarlo!",cancelButtonText:"Cancelar"}).then(t=>{if(t.isConfirmed){let t;Swal.fire({title:"Procesando Pedido",didOpen:()=>{Swal.showLoading(),t=setInterval(()=>{const e=Swal.getHtmlContainer();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}},100)}}),$.ajax({url:"/pedidos/proceso/"+e,type:"put",contentType:"application/json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),contentType:"application/json"},data:null,success:function(e){200==e.status?Swal.fire({icon:e.icon,title:e.title,text:e.message+e.space+e.id+e.space+e.message2,confirmButtonColor:"#343a40",showConfirmButton:!0}).then(e=>{$(location).attr("href","/pedidos/depositos")}):Swal.fire({icon:"error",title:"Ops...",text:"Ocurrio un error inesperado"})}})}else t.dismiss&&$("#formPassed input[type=checkbox]").prop("checked",!1)})}function checkDeliveredOrder(e){Swal.fire({title:"Estas seguro?",text:"Deseas marcar el pedido "+e+" como entregado?",icon:"question",showCancelButton:!0,confirmButtonColor:"#343a40",cancelButtonColor:"#d33",confirmButtonText:"Si, entregado!",cancelButtonText:"Cancelar"}).then(t=>{if(t.isConfirmed){let t;Swal.fire({title:"Entregando Pedido",didOpen:()=>{Swal.showLoading(),t=setInterval(()=>{const e=Swal.getHtmlContainer();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}},100)}}),$.ajax({url:"/pedidos/entregados/"+e,type:"put",contentType:"application/json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),contentType:"application/json"},data:null,success:function(e){200==e.status?Swal.fire({icon:e.icon,title:e.title,text:e.message+e.space+e.id+e.space+e.message2,confirmButtonColor:"#343a40",showConfirmButton:!0}).then(e=>{$(location).attr("href","/pedidos/proceso")}):Swal.fire({icon:"error",title:"Ops...",text:"Ocurrio un error inesperado"})}})}else t.dismiss&&$("#formDelivered input[type=checkbox]").prop("checked",!1)})}function checkPassedOrderPending(e){Swal.fire({title:"Estas seguro?",text:"Deseas aprobar este deposito",icon:"question",showCancelButton:!0,confirmButtonColor:"#343a40",cancelButtonColor:"#d33",confirmButtonText:"Si, Aprobarlo!",cancelButtonText:"Cancelar"}).then(t=>{if(t.isConfirmed){let t;Swal.fire({title:"Aprobando deposito del Pedido "+e+" reagendado",didOpen:()=>{Swal.showLoading(),t=setInterval(()=>{const e=Swal.getHtmlContainer();if(e){const t=e.querySelector("b");t&&(t.textContent=Swal.getTimerLeft())}},100)}}),$.ajax({url:"/pedidos/aprobados/"+e,type:"put",contentType:"application/json",headers:{"X-CSRF-TOKEN":$('meta[name="csrf-token"]').attr("content"),contentType:"application/json"},data:null,success:function(e){200==e.status?Swal.fire({icon:e.icon,title:e.title,text:e.message+e.space+e.id+e.space+e.message2,confirmButtonColor:"#343a40",showConfirmButton:!0}).then(e=>{$(location).attr("href","/pedidos/pendientes")}):Swal.fire({icon:"error",title:"Ops...",text:"Ocurrio un error inesperado"})}})}else t.dismiss&&$("#formIdPending input[type=checkbox]").prop("checked",!1)})}$(document).ready(function(){document.getElementById("name_user").readOnly=!0,document.getElementById("role_id_user").readOnly=!0,$("#formId input[type=checkbox]").click(function(){this.checked&&checkPassedOrder($(this).val())}),$("#formPassed input[type=checkbox]").click(function(){this.checked&&checkProcessOrder($(this).val())}),$("#formDelivered input[type=checkbox]").click(function(){this.checked&&checkDeliveredOrder($(this).val())}),$("#formIdPending input[type=checkbox]").click(function(){this.checked&&checkPassedOrderPending($(this).val())}),$("#buttonVoucher").click(function(e){e.preventDefault(),showVoucher(order.link,order.img)}),$("#addProduct").click(function(e){if(e.preventDefault(),i>=9)return Swal.fire({icon:"warning",title:"Ops...",text:"Se permite maximo 10 grupos de items",confirmButtonColor:"#343a40"}),!1;{i++;let e=$("#ShowMoreProduct").clone().appendTo(".fieldGroupCopy").attr("class","input-group mb-3 copy-"+i).attr("id","copy");return document.querySelector(".copy-"+i).style.setProperty("display","flex"),e.children()[2].children[0].value="copy-"+i,e.children()[1].className="form-control col-md-11 custom-select copy",e.children()[0].className="form-control copy_quantity",!0}});var e=new Date,t=("0"+(e.getMonth()+1)).slice(-2),o=("0"+e.getDate()).slice(-2),n=e.getFullYear(),r=e.getHours(),c=e.getMinutes();document.getElementById("delivery_date").value=n+"-"+t+"-"+o+"T"+minTwoDigits(r)+":"+minTwoDigits(c),$("select[name='payment_type_id']").change(function(){1==$("select[name='payment_type_id']").val()&&$("#formFileSm").prop("hidden",!0)&&$("#formFileSm").prop("value",''),2==$("select[name='payment_type_id']").val()&&$("#formFileSm").prop("hidden",!1)})});
